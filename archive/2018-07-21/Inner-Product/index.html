<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="en,zh-Hans,ja,Latn,default">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">






  
  
  <link rel="stylesheet" media="all" href="/lib/Han/dist/han.min.css?v=3.3">




<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Monda,Arial,STXingkai,"华文行楷",STKaiti,“华文楷体”,STFangsong,Lato:300,300italic,400,400italic,700,700italic|Roboto Slab,STKaiti,"华文楷体":300,300italic,400,400italic,700,700italic|Arial,STXingkai,华文行楷,STKaiti,华文楷体,STFangsong,华文仿宋:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.3" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.3">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.3">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.3" color="#222">





  <meta name="keywords" content="Inner Product,Vector Space,Function Space,Random Variable Space," />










<meta name="description" content="简介  Data can be interpreted as vectors. Vectors allow us to talk about geometric concepts, such as lengths, distances and angles to characterise similarity between vectors. This will become important">
<meta name="keywords" content="Inner Product,Vector Space,Function Space,Random Variable Space">
<meta property="og:type" content="article">
<meta property="og:title" content="二.内积（重要基础概念）">
<meta property="og:url" content="https://asiagood.github.io/archive/2018-07-21/Inner-Product/index.html">
<meta property="og:site_name" content="逝川">
<meta property="og:description" content="简介  Data can be interpreted as vectors. Vectors allow us to talk about geometric concepts, such as lengths, distances and angles to characterise similarity between vectors. This will become important">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-07-24T05:07:42.772Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="二.内积（重要基础概念）">
<meta name="twitter:description" content="简介  Data can be interpreted as vectors. Vectors allow us to talk about geometric concepts, such as lengths, distances and angles to characterise similarity between vectors. This will become important">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.3',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://asiagood.github.io/archive/2018-07-21/Inner-Product/"/>





  <title>二.内积（重要基础概念） | 逝川</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">逝川</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">此间且为等闲事，花开花谢不知年</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-主页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            主页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-关于">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  
  <div class="algolia-popup popup search-popup">
    <div class="algolia-search">
      <div class="algolia-search-input-icon">
        <i class="fa fa-search"></i>
      </div>
      <div class="algolia-search-input" id="algolia-search-input"></div>
    </div>

    <div class="algolia-results">
      <div id="algolia-stats"></div>
      <div id="algolia-hits"></div>
      <div id="algolia-pagination" class="algolia-pagination"></div>
    </div>

    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
  </div>




    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://asiagood.github.io/archive/2018-07-21/Inner-Product/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="popoblue">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="逝川">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">二.内积（重要基础概念）</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-21T01:26:13+08:00">
                2018-07-21
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/课程笔记/" itemprop="url" rel="index">
                    <span itemprop="name">课程笔记</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/课程笔记/Mathematics-for-Machine-Learning/" itemprop="url" rel="index">
                    <span itemprop="name">Mathematics for Machine Learning</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/课程笔记/Mathematics-for-Machine-Learning/PCA/" itemprop="url" rel="index">
                    <span itemprop="name">PCA</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/archive/2018-07-21/Inner-Product/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count valine-comment-count" data-xid="/archive/2018-07-21/Inner-Product/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          
             <span id="/archive/2018-07-21/Inner-Product/" class="leancloud_visitors" data-flag-title="二.内积（重要基础概念）">
               <span class="post-meta-divider">|</span>
               <span class="post-meta-item-icon">
                 <i class="fa fa-eye"></i>
               </span>
               
                 <span class="post-meta-item-text">Visitors&#58;</span>
               
                 <span class="leancloud-visitors-count"></span>
             </span>
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  
                </span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body han-init-context" itemprop="articleBody">

      
      

      
        <p>简介</p>
<blockquote>
<p><strong>Data can be interpreted as vectors</strong>. Vectors allow us to talk about <strong>geometric</strong> concepts, such as lengths, distances and angles to characterise similarity between vectors. This will become important later in the course when we discuss PCA. In this module, we will introduce and practice the concept of an inner product. <strong>Inner products</strong> allow us to talk about geometric concepts in vector spaces. More specifically, we will start with the dot product (which we may still know from school) as a special case of an inner product, and then move toward a more general concept of an inner product, which play an integral part in some areas of machine learning, such as <strong>kernel machines</strong> (this includes support vector machines and Gaussian processes). We have a lot of exercises in this module to practice and understand the concept of inner products.</p>
</blockquote>
<p>学习目标</p>
<blockquote>
<ul>
<li>Explain inner products, and compute <strong>angles and distances</strong> using inner products</li>
<li>Write code that computes distances and angles between images</li>
<li>Demonstrate an understanding of properties of inner products</li>
<li>Discover that <strong>orthogonality</strong> depends on the inner product</li>
</ul>
</blockquote>
<font color="red"> 

<ol>
<li><p><strong>Dot Product $\ne$  Inner Product, the former is just one of the later.</strong></p>
</li>
<li><p><strong>Inner Product is the generalization of dot product.</strong></p>
</li>
<li><p><strong>Inner Product allow us to define and describe some geometric concepts.</strong><br></p></li></ol></font><p></p>


<hr>
<h1 id="Dot-Product"><a href="#Dot-Product" class="headerlink" title="Dot Product"></a>Dot Product</h1><p>Two vectors $\mathbf x, \mathbf y \in \mathbb R^n$.</p>
<p><strong>Definition1</strong></p>
<p>$\color{blue}{\mathbf x \cdot \mathbf y = len(\mathbf x)len(\mathbf y)cos(\theta)}$</p>
<blockquote>
<p>In this definition, <strong>lengths and angles are given</strong>! <strong>We use them to define the “dot product.”</strong></p>
</blockquote>
<p><strong>Definition2</strong></p>
<p>$\color{blue}{\mathbf x \cdot \mathbf y = \sum_{i=1}^n x_iy_i = \mathbf x^T \mathbf y}$</p>
<blockquote>
<p>In this definition, there is no lengths and angle, we only use vector itself and two operations: scalar multiplication and addition. Or, we also can just definite it in a matrix form: transpose  and matrix multiplication.</p>
</blockquote>
<p><strong>Length of a vector</strong></p>
<p>$len(\mathbf x) = \Vert \mathbf x \Vert = \sqrt { \Vert \mathbf x \Vert ^2} $</p>
<p>$ \Vert \mathbf x \Vert ^2 =\mathbf x \cdot \mathbf x =\mathbf x^T \mathbf x$.</p>
<blockquote>
<p>Note, here we are not defining the length, we just derive this <u>property</u> from the definiton of “dot product”. i.e. $\mathbf x \cdot \mathbf x = len(\mathbf x)len(\mathbf x)cos(\theta) =len^2(\mathbf x)$.</p>
</blockquote>
<p><strong>Distance between two vectors</strong></p>
<p>$\mathbf d = \mathbf x - \mathbf y$</p>
<p>$\Vert \mathbf d \Vert = \sqrt{\mathbf d^T \mathbf d}$</p>
<p><strong>Angle between two vectors.</strong></p>
<p>$cos(\theta) = \frac{\mathbf x \cdot \mathbf y}{\Vert \mathbf x\Vert \Vert \mathbf y \Vert} = \frac{\mathbf x^T \mathbf y}{\Vert \mathbf x\Vert \Vert \mathbf y\Vert}$</p>
<blockquote>
<p>We are not definiting the angle too, we just derive this <u>property</u> from the definition of “dot product”.</p>
</blockquote>
<h1 id="Inner-Product"><a href="#Inner-Product" class="headerlink" title="Inner Product"></a>Inner Product</h1><h2 id="Definition"><a href="#Definition" class="headerlink" title="Definition"></a>Definition</h2><p>Inner product is <strong>a generializeiton of dot product</strong>, <strong>which can be used to represent the geometric concepts</strong>:  length, distance and angle, etc.</p>
<blockquote>
<p>A vector space with a additional structure–inner product is referred to the inner product space.</p>
</blockquote>
<p><strong>从这一刻开始，我们首先定义 Inner Product， 然后任何的几何概念、几何操作 都用 Inner Product 来描述。我们熟悉的 dot product-也仅仅是一种 valid Inner Product 而已。</strong> </p>
<blockquote>
<p>此后，几何概念（e.g. 长度、距离、夹角等待）均由内积来定义和描述。此刻开始的linear algebra，现有内积，后有几何。</p>
</blockquote>
<p><strong>Definition</strong></p>
<p>Formally, an inner product space is a vector space $V$ over the field $\mathbb R$ together with an <strong>inner product which is a map</strong> </p>
<p>$\color{blue}{\langle \cdot,\cdot \rangle: V\times V \rightarrow \mathbb R}$. </p>
<blockquote>
<p>$\color{purple}{\text{i.e. it is a function which take two vectors as input and output a scalar.} }$</p>
</blockquote>
<p>that satisfies the following three axioms for all vectors $x,y,z \in V$ and scalars $\alpha \in \mathbb R$:</p>
<ul>
<li><p><strong>Commutativity</strong></p>
<p>$\langle \mathbf x, \mathbf y \rangle = \langle \mathbf y,\mathbf z \rangle$</p>
<blockquote>
<p>Sometimes, also is called symmteric.</p>
</blockquote>
</li>
<li><p><strong>Linearity</strong></p>
<p>$\langle \alpha \mathbf x, \mathbf y \rangle=\alpha \langle \mathbf x, \mathbf y \rangle$</p>
<p>$\langle \mathbf x+\mathbf y, \mathbf z \rangle=\langle \mathbf x, \mathbf z \rangle + \langle \mathbf y, \mathbf z \rangle$</p>
<blockquote>
<p>实际上，这一条axiom配合第一条axiom，可以很容易地推导出：$\langle x,y+z \rangle = \langle y+z,x\rangle= \langle y,x\rangle + \langle z ,x\rangle$ ,因此这一条linear axiom实际上可以说是<strong>bilinearity</strong>. </p>
</blockquote>
</li>
<li><p><strong>Positive-definite</strong></p>
<p>$\langle \mathbf x,\mathbf x \rangle &gt; 0$ , $\text{for any}$ $\mathbf x \ne \mathbf 0$.</p>
<p>$\langle \mathbf x, \mathbf x \rangle=\mathbf 0$, $\text{if and only if }$ $\mathbf x =\mathbf 0$.</p>
</li>
</ul>
<p><u>Example 1:</u></p>
<p>$\color{blue}{\langle \mathbf x,\mathbf y \rangle=\mathbf x^T \mathbf y}$  Which  is dot product, it’s a vaild inner product according to the three axioms.</p>
<p><u>Example 2:</u></p>
<p>$\color{blue}{\langle \mathbf x, \mathbf y\rangle = \mathbf x^T\mathbf A \mathbf y}$, where $\mathbf A$ is a <em>symmetric positive</em> matrix，i.e. $\mathbf A\in \mathbb S^{\dagger}$. 我们现在用三条公理验证一下：</p>
<ul>
<li>$\langle \mathbf y, \mathbf x\rangle = \mathbf y^T\mathbf A \mathbf x = (\mathbf y^T\mathbf A \mathbf x)^T=\mathbf x^T\mathbf A^T \mathbf y= \mathbf x^T\mathbf A \mathbf y = \langle \mathbf x, \mathbf y \rangle$.</li>
<li>$\langle \mathbf x+ \mathbf y,\mathbf z\rangle = (\mathbf x+\mathbf y)^T\mathbf A \mathbf z = \mathbf x^T \mathbf A \mathbf z + \mathbf y^T \mathbf A \mathbf z = \langle \mathbf x, \mathbf z \rangle + \langle \mathbf y, \mathbf z \rangle$.</li>
<li>$\langle \mathbf x, \mathbf x \rangle= \mathbf x^T \mathbf A \mathbf x &gt; \mathbf 0$, for any $\mathbf x\ne \mathbf0.$ (by the definition of quadratic form.)</li>
</ul>
<p>经过三公理的检验，我们知道:$\langle \mathbf x, \mathbf y \rangle= \mathbf x\mathbf A^T \mathbf y$ 是一种合理的 <strong>Inner Product.</strong></p>
<blockquote>
<p>由此可见，dot product is just a special kind of vaild inner products.</p>
</blockquote>
<h2 id="Length-of-vectors"><a href="#Length-of-vectors" class="headerlink" title="Length of vectors"></a>Length of vectors</h2><p><strong>这里，我们先有了 Inner Product的定义，基于此我们来定义 length of vector.</strong> 注意这个顺序与在dot product 中是相反的。</p>
<p><strong>Definition</strong></p>
<p>$\color{blue}{len(\mathbf x) = \Vert \mathbf x\Vert = \sqrt{\langle \mathbf x,\mathbf x \rangle}}$. ($norm(\mathbf x)$)</p>
<ul>
<li>在这里，长度的概念依赖于 Inner Product.</li>
<li>Inner Product 不同的具体形式决定了“同一个vector 的长度不是恒定不变的，随着Inner Product 的改变同一个vector的长度可能随之改变”</li>
</ul>
<p><u>Example 3</u>:  $\mathbf x =\begin{bmatrix} 1 \\1\end{bmatrix}$, and then $len(\mathbf x) =?$</p>
<ul>
<li>$\langle \mathbf x,\mathbf y \rangle = \mathbf x^T\mathbf y$ ： $len(\mathbf x) = \sqrt{\langle \mathbf x, \mathbf x\rangle}= \sqrt{2}$.</li>
<li>$\langle \mathbf x, \mathbf y\rangle = \mathbf x^T\begin{bmatrix} 2&amp; -1\\-1 &amp; 2 \end{bmatrix}\mathbf y $ : and then $len(\mathbf x) = \sqrt{\langle \mathbf x, \mathbf x\rangle} = 2$.</li>
</ul>
<p><strong>Properties</strong></p>
<p>$\text{ for any }\mathbf x，\mathbf y\in \mathbb R^n$</p>
<ol>
<li>$\Vert \mathbf x\Vert \ge 0 $. </li>
<li>$\Vert \lambda \mathbf x \Vert = \vert \lambda \vert \Vert \mathbf x \Vert$. ( <strong>homogeneity</strong> )</li>
<li>$\Vert \mathbf x + \mathbf y \Vert \le \Vert \mathbf x \Vert + \Vert \mathbf y \Vert.$ (<strong>triangle equality</strong>)</li>
<li>$\vert \langle \mathbf x , \mathbf y\rangle\vert \le \sqrt{\langle \mathbf x, \mathbf x \rangle}\sqrt{\langle \mathbf y,\mathbf y \rangle} = \Vert \mathbf x \Vert  \Vert \mathbf y \Vert  $ .( <strong>Cauchy-Schwart inequality</strong> )</li>
</ol>
<h2 id="Distance-between-two-vectors"><a href="#Distance-between-two-vectors" class="headerlink" title="Distance between two vectors"></a>Distance between two vectors</h2><p>同样，也是基于<strong>Inner Product</strong> 的定义。也就是说，<strong>2个向量间的距离</strong>取决于 Inner Product 的具体形似；不同的 Inner Product 会导致不同的距离。</p>
<p>$d(\mathbf x, \mathbf y)=\Vert \mathbf{x-y} \Vert = \sqrt{\langle (\mathbf{x-y}),(\mathbf {x -y}) \rangle}$.</p>
<p><u>Example 4</u>:</p>
<p>$\mathbf x = \begin{bmatrix}2 \\3 \end{bmatrix}, \mathbf y = \begin{bmatrix}4\\1 \end{bmatrix}$.</p>
<p>$\langle \mathbf x, \mathbf y\rangle = \mathbf x^T \mathbf y$ : $d(\mathbf x, \mathbf y) =\sqrt {(\mathbf{x-y})^T(\mathbf {x-y})}=\sqrt{8}$.</p>
<p>$\langle \mathbf x, \mathbf y\rangle =\mathbf x^T \mathbf A \mathbf y$ , where $\mathbf A = \begin{bmatrix}2 &amp; -1\\-1&amp;2 \end{bmatrix}$ :  </p>
<p>$d(\mathbf x, \mathbf y) = \sqrt{(\mathbf {x-y})^T\mathbf A (\mathbf {x-y})} = \sqrt{24}$.</p>
<p>我们可以看出，在不同的 Inner Product 下，同样两个向量的 distance是不一样的。</p>
<h2 id="Angles-and-orthogonality"><a href="#Angles-and-orthogonality" class="headerlink" title="Angles and orthogonality"></a>Angles and orthogonality</h2><p><strong>Angles between two vectors.</strong></p>
<p>$cos(\theta) =\frac{\langle \mathbf x, \mathbf y \rangle}{\sqrt{\langle \mathbf x, \mathbf x\rangle}\sqrt{\langle \mathbf y, \mathbf y\rangle}} = \frac{\langle \mathbf x, \mathbf y \rangle}{\Vert \mathbf x \Vert \Vert \mathbf y \vert}$.</p>
<blockquote>
<p>注意这个定义和本节课最初的和角度相关的公式的区别. 之前的角度公式是dot product 的性质；这里我们是用 Inner Product 来定义角度 ； 之前我们是先有了角度，才有dot product，现在我们是先有了 Inner product，然后才定义了角度。</p>
</blockquote>
<p>既然angles 由 Inner Product 来定义，那么与之前的length， distance一样：$cos(\theta)$ 取决于 Inner Product的定义，不同的 Inner Product 会导致 angle不同。</p>
<p><strong>Orthogonality</strong></p>
<p>The definition of orthogonality depend on  Inner product:</p>
<p>$ \langle \mathbf x, \mathbf y \rangle = 0 \Leftrightarrow $ $\mathbf x$ and $\mathbf y$ is orthogonal $\Leftrightarrow \theta =\frac{\pi}{2}rad =90^\circ.$</p>
<blockquote>
<p>Again, 我们再一次强调，之前我们的结论是：先有两向量垂直，再有 dot product 为0; 现在流程反过来：先有Inner product 为 0， 再有两向量垂直。这可以体现出，哪个concept 是主导概念，哪个是附属概念。这里， <strong>Inner Product 显然是主导概念。</strong></p>
</blockquote>
<p><u>Example 5</u>:</p>
<p>$\mathbf x = \begin{bmatrix}1\\1 \end{bmatrix}, \mathbf y=\begin{bmatrix} -1\\1 \end{bmatrix}.$</p>
<p>$\langle \mathbf x, \mathbf y\rangle = \mathbf x^T \mathbf y$ : $cos(\theta) = 0 \Rightarrow \theta = 90^\circ$, i.e. $\mathbf x$ and $\mathbf y$ are orthogonal.</p>
<p>$\langle \mathbf x, \mathbf y\rangle = \mathbf x^T \begin{bmatrix}2 &amp; 0\\ 0 &amp; 1 \end{bmatrix} \mathbf y = -1\ne 0 $ : i.e. $\mathbf x$ and $\mathbf y$ are <strong>not</strong> orthogonal.</p>
<p>同样2个向量，基于不同的 inner product 是否 orthogonal 并不一定是一致的。</p>
<p><strong>几何观点：</strong></p>
<p>从几何观点看待两个向量 orthogonal，即：这两个向量最不相似，除了原点之外没有共同之处。</p>
<h1 id="Inner-product-of-functions-and-random-variable"><a href="#Inner-product-of-functions-and-random-variable" class="headerlink" title="Inner product of functions and random variable"></a>Inner product of functions and random variable</h1><p>思考之前 Inner Product 的定义：其本质是一个函数，输入2个vectors 输出一个 scalar. 如果现在的 vector 是函数，那什么函数符合这个原则？积分！</p>
<h2 id="Inner-product-for-function"><a href="#Inner-product-for-function" class="headerlink" title="Inner product for function"></a>Inner product for function</h2><h3 id="Definition-1"><a href="#Definition-1" class="headerlink" title="Definition"></a>Definition</h3><p>现在，$V$ 是一个function space which means that each vector in this vector space is a function .</p>
<p>$\color{blue}{\langle f,g\rangle = \int_a^b f(x)g(x)dx}$</p>
<p>上面定义的 innder product 符合3哥axioms，如下：</p>
<ul>
<li><strong>Commutativity</strong><ul>
<li>$\langle f,g\rangle = \int_a^b g(x)f(x)dx = \langle g,f \rangle$. </li>
</ul>
</li>
<li><strong>Linearity</strong><ul>
<li>$\langle f+h,g \rangle = \int_a^b(f(x)+h(x))g(x)dx = \int_a^bf(x)g(x)dx + \int_a^b h(x)g(x)dx = \langle f,g\rangle + \langle h,g \rangle$</li>
<li>$\langle\alpha f,g \rangle = \int_a^b \alpha f(x)g(x) = \alpha \int_a^b f(x)g(x)dx = \alpha \langle f,g \rangle$</li>
</ul>
</li>
<li><strong>Positive-definite</strong><ul>
<li>$\langle f,f\rangle = \int_a^b f^2(x)dx &gt;0$ for any $f(x)\ne 0$ when $x\in[a,b]$.</li>
<li>$\langle f,f\rangle = \int_a^b f^2(x)dx =0$ if and only if $f(x) = 0$ for $x\in [a,b]$.</li>
</ul>
</li>
</ul>
<h3 id="Orthgonal-angle"><a href="#Orthgonal-angle" class="headerlink" title="Orthgonal/angle"></a>Orthgonal/angle</h3><p>类比我们在传统向量空间中的概念，函数空间中也有类似概念：两个函数的正交性,夹角等。</p>
<p><u>Example 6</u>:</p>
<p>$f(x) = sin(x), g(x) = cos(x), a=-\pi,b = \pi$  ,so  $\langle f,g\rangle = \int_{-\pi}^{\pi} sin(x)cos(x)dx$.</p>
<p>$\langle sin(x), cos(x)\rangle = 0 \Rightarrow \color{purple}{\text{sin(x) and cos(x) are orthogonal.}}$</p>
<p><u>Example 7</u>:</p>
<p>$\lbrace 1, cosx, cos2x,cos3x,…\rbrace$ <strong>Functions in this set Is orthogonal to each other.</strong></p>
<h3 id="Norm-length-of-function"><a href="#Norm-length-of-function" class="headerlink" title="Norm/length of function"></a>Norm/length of function</h3><p>$len(f(x))=norm(f(x)) = \Vert f(x) \Vert=\sqrt{\langle f,f\rangle}$.</p>
<p>Example 8: innder product is defined as the one in example 6.</p>
<p>$len(sin(x)) = \int_{-\pi}^{\pi} sin(x)sin(x)dx = 4$. </p>
<h2 id="Inner-product-for-random-variable"><a href="#Inner-product-for-random-variable" class="headerlink" title="Inner product for random variable"></a>Inner product for random variable</h2><h3 id="Definition-2"><a href="#Definition-2" class="headerlink" title="Definition"></a>Definition</h3><p>If two random variables are <strong>uncorrelated</strong>, then $var[X+Y] = var[X] + var[Y]$.</p>
<p>If we define inner product is :</p>
<p>$\color{blue}{\langle X,Y\rangle =cov[X,Y]}$, 我们现在验证其是否为一个 valid inner product.</p>
<ul>
<li><strong>Commutativity</strong><ul>
<li>$\langle X,Y\rangle = cov[X,Y] = cov[Y,X] = \langle Y,X\rangle$.</li>
</ul>
</li>
<li><strong>Linearity</strong><ul>
<li>$\langle X+Z,Y\rangle  = cov[X+Z,Y]= cov[X,Y] + cov[Z,Y] = \langle X,Y \rangle + \langle Z,Y \rangle$.</li>
<li>$\langle \alpha X,Y\rangle = cov[\alpha X,Y]=\alpha cov[X,Y]=\alpha \langle X,Y \rangle$.</li>
</ul>
</li>
<li><strong>Positive-definite</strong><ul>
<li>$\langle X,X \rangle = cov[X,X]=var[X] &gt;0$ for any random variable $\sigma(X) \ne 0$.</li>
</ul>
</li>
</ul>
<p>所以，covariance 是 valid inner product.</p>
<h3 id="Norm-length"><a href="#Norm-length" class="headerlink" title="Norm/length"></a>Norm/length</h3><p>$len(X)=norm(X) = \sqrt{\langle X,X\rangle} = \sqrt{cov[X,X]} = \sqrt{var[X]}=\sigma(X)$</p>
<p>随机变量的<strong>长度</strong> 就是其 <strong>standard deviation</strong>。</p>
<h3 id="Angle"><a href="#Angle" class="headerlink" title="Angle"></a>Angle</h3><p>$cos(\theta) = \frac{\langle X,Y\rangle}{\sqrt{\langle X,X \rangle}\sqrt{\langle Y,Y \rangle}}= \frac{cov[X,Y]}{\sqrt{var[X]}\sqrt{var[Y]}}$. which is the just the <strong>correlation coefficient</strong>.</p>
<p>两个随机变量间的<strong>夹角</strong>就是他们的<strong>相关系数</strong>。并且：</p>
<p>$\theta = 0 \Leftrightarrow$ $X$ And $Y$ are <strong>uncorrelate</strong>d $\Leftrightarrow$ $X$ and $Y$ are <strong>orthogonal</strong>.</p>
<h3 id="Distance"><a href="#Distance" class="headerlink" title="Distance"></a>Distance</h3><p>$$<br>\begin{align}<br>\color{blue}{d(X,Y)} &amp;= \Vert\langle X-Y,X-Y\rangle \Vert \\<br>&amp;= \sqrt{\langle X-Y,X-Y\rangle} \\<br>&amp;= \sqrt{cov[X-Y,X-Y]}\\<br>&amp;=\sqrt{var[X-Y]}<br>= \color{blue}{\sigma(X-Y)}<br>\end{align}<br>$$</p>
<h1 id="Basic-vectors"><a href="#Basic-vectors" class="headerlink" title="Basic vectors"></a>Basic vectors</h1><p>Here is a document which describe the basic vector clearly, you can  <a href="https://d3c33hcgiwev3.cloudfront.net/5cwvvxtEEeibhw72l5cNxg_e5f4ec801b4411e8966ca50fe182f2e3_basis.pdf?Expires=1532390400&amp;Signature=YFRo4HZ2AC1WBtNyjqpauWk9BCvkV~khafJMOIMPlIpEVsXUAh-WCefFrdJ2VlEXNpSLhCQ5mCg-6cFEhaHwp8Js8pZ1bfPFEeSTjh-21xdtJAzD9MBv-vkB5CjSx8vK~U8JSSCAX5bloOo7S~K5JftJdk76HNfFiHfScYSjar4_&amp;Key-Pair-Id=APKAJLTNE6QMUY6HBC5A" target="_blank" rel="noopener">download here</a>.</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><ul>
<li>在这一节课，我们先定义了什么是 <strong>Inner Product</strong>： <strong>一个函数，输入为两个 vectors, 输出为一个 scalar.</strong></li>
<li><strong>在此基础之上</strong>，我们定义了 length（norm）,angle, distance. 也就是说，<strong>内积直接决定了这些概念，随着选择不同的内积，这些概念的取值可能发生变化。</strong></li>
<li>我们将上述概念扩展到了 function space and random variable space.</li>
<li>我们重新认识了 Basic vectors.</li>
</ul>
<p>一份在线练习，用来巩固关键概念并借此实现一个经典分类算法-KNN 分类， <a href="https://hub.coursera-notebooks.org/user/ulxcpxlsfseegsaeqorjxk/notebooks/week2.ipynb" target="_blank" rel="noopener">link</a>.</p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>坚持原创分享，您的支持是我继续创作的动力!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechatpay.jpg" alt="popoblue WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="/images/alipay.jpg" alt="popoblue Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:</strong>
    popoblue
  </li>
  <li class="post-copyright-link">
    <strong>Post link:</strong>
    <a href="https://asiagood.github.io/archive/2018-07-21/Inner-Product/" title="二.内积（重要基础概念）">https://asiagood.github.io/archive/2018-07-21/Inner-Product/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice: </strong>
    All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 3.0</a> unless stating additionally.
  </li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Inner-Product/" rel="tag"># Inner Product</a>
          
            <a href="/tags/Vector-Space/" rel="tag"># Vector Space</a>
          
            <a href="/tags/Function-Space/" rel="tag"># Function Space</a>
          
            <a href="/tags/Random-Variable-Space/" rel="tag"># Random Variable Space</a>
          
        </div>
      

      
      
        <div class="post-widgets">
        

        

        
          
          <div id="needsharebutton-postbottom">
            <span class="btn">
              <i class="fa fa-share-alt" aria-hidden="true"></i>
            </span>
          </div>
        
        </div>
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/archive/2018-07-17/Statistics-of-Datasets/" rel="next" title="一.数据集的统计特性">
                <i class="fa fa-chevron-left"></i> 一.数据集的统计特性
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/archive/2018-07-23/Orthogonal-Projections/" rel="prev" title="三. 正交投影">
                三. 正交投影 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">popoblue</p>
              <p class="site-description motion-element" itemprop="description">知行合一，一个功夫！</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">47</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">17</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">131</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          <div class="links-of-author motion-element">
            
              
                <span class="links-of-author-item">
                  <a href="https://github.com/yazhouhao" target="_blank" title="GitHub">
                    
                      <i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="mailto:me@yazhouhao.com" target="_blank" title="E-Mail">
                    
                      <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://twitter.com/yazhouhao" target="_blank" title="Twitter">
                    
                      <i class="fa fa-fw fa-twitter"></i>Twitter</a>
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.facebook.com/yazhouhao" target="_blank" title="FB Page">
                    
                      <i class="fa fa-fw fa-facebook"></i>FB Page</a>
                </span>
              
            
          </div>

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Dot-Product"><span class="nav-number">1.</span> <span class="nav-text">Dot Product</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inner-Product"><span class="nav-number">2.</span> <span class="nav-text">Inner Product</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Definition"><span class="nav-number">2.1.</span> <span class="nav-text">Definition</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Length-of-vectors"><span class="nav-number">2.2.</span> <span class="nav-text">Length of vectors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Distance-between-two-vectors"><span class="nav-number">2.3.</span> <span class="nav-text">Distance between two vectors</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Angles-and-orthogonality"><span class="nav-number">2.4.</span> <span class="nav-text">Angles and orthogonality</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Inner-product-of-functions-and-random-variable"><span class="nav-number">3.</span> <span class="nav-text">Inner product of functions and random variable</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Inner-product-for-function"><span class="nav-number">3.1.</span> <span class="nav-text">Inner product for function</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Definition-1"><span class="nav-number">3.1.1.</span> <span class="nav-text">Definition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Orthgonal-angle"><span class="nav-number">3.1.2.</span> <span class="nav-text">Orthgonal/angle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Norm-length-of-function"><span class="nav-number">3.1.3.</span> <span class="nav-text">Norm/length of function</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inner-product-for-random-variable"><span class="nav-number">3.2.</span> <span class="nav-text">Inner product for random variable</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Definition-2"><span class="nav-number">3.2.1.</span> <span class="nav-text">Definition</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Norm-length"><span class="nav-number">3.2.2.</span> <span class="nav-text">Norm/length</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Angle"><span class="nav-number">3.2.3.</span> <span class="nav-text">Angle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Distance"><span class="nav-number">3.2.4.</span> <span class="nav-text">Distance</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Basic-vectors"><span class="nav-number">4.</span> <span class="nav-text">Basic vectors</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#总结"><span class="nav-number">5.</span> <span class="nav-text">总结</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2017 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">popoblue</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count"></span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.3</div>




        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.3"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.3"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.3"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.3"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.3"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.3"></script>



  


  




	





  





  










  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item=>{
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'fgig2ECgFUUIzHQxQ6UEGBsw-gzGzoHsz',
        appKey: 'qwf4KMNBL2n522kimTswJY9w',
        placeholder: 'Just go go',
        avatar:'mm',
        guest_info:guest,
        pageSize:'10' || 10,
    });
  </script>



  




  
  
  
  <link rel="stylesheet" href="/lib/algolia-instant-search/instantsearch.min.css">

  
  
  <script src="/lib/algolia-instant-search/instantsearch.min.js"></script>
  

  <script src="/js/src/algolia-search.js?v=5.1.3"></script>



  

  
  <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script>
  <script>AV.initialize("fgig2ECgFUUIzHQxQ6UEGBsw-gzGzoHsz", "qwf4KMNBL2n522kimTswJY9w");</script>
  <script>
    function showTime(Counter) {
      var query = new AV.Query(Counter);
      var entries = [];
      var $visitors = $(".leancloud_visitors");

      $visitors.each(function () {
        entries.push( $(this).attr("id").trim() );
      });

      query.containedIn('url', entries);
      query.find()
        .done(function (results) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.get('url');
            var time = item.get('time');
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for(var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if( countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function (object, error) {
          console.log("Error: " + error.code + " " + error.message);
        });
    }

    function addCount(Counter) {
      var $visitors = $(".leancloud_visitors");
      var url = $visitors.attr('id').trim();
      var title = $visitors.attr('data-flag-title').trim();
      var query = new AV.Query(Counter);

      query.equalTo("url", url);
      query.find({
        success: function(results) {
          if (results.length > 0) {
            var counter = results[0];
            counter.fetchWhenSave(true);
            counter.increment("time");
            counter.save(null, {
              success: function(counter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(counter.get('time'));
              },
              error: function(counter, error) {
                console.log('Failed to save Visitor num, with error message: ' + error.message);
              }
            });
          } else {
            var newcounter = new Counter();
            /* Set ACL */
            var acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newcounter.setACL(acl);
            /* End Set ACL */
            newcounter.set("title", title);
            newcounter.set("url", url);
            newcounter.set("time", 1);
            newcounter.save(null, {
              success: function(newcounter) {
                var $element = $(document.getElementById(url));
                $element.find('.leancloud-visitors-count').text(newcounter.get('time'));
              },
              error: function(newcounter, error) {
                console.log('Failed to create');
              }
            });
          }
        },
        error: function(error) {
          console.log('Error:' + error.code + " " + error.message);
        }
      });
    }

    $(function() {
      var Counter = AV.Object.extend("Counter");
      if ($('.leancloud_visitors').length == 1) {
        addCount(Counter);
      } else if ($('.post-title-link').length > 1) {
        showTime(Counter);
      }
    });
  </script>



  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  
  
  
  <link rel="stylesheet" href="/lib/needsharebutton/needsharebutton.css">

  
  
  <script src="/lib/needsharebutton/needsharebutton.js"></script>

  <script>
    
      pbOptions = {};
      
          pbOptions.iconStyle = "box";
      
          pbOptions.boxForm = "horizontal";
      
          pbOptions.position = "bottomCenter";
      
          pbOptions.networks = "Linkedin,Weibo,Wechat,Douban,QQZone,Twitter,Facebook";
      
      new needShareButton('#needsharebutton-postbottom', pbOptions);
    
    
  </script>

  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


  

  

</body>
</html>
